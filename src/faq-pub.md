[TOC]

##  编程接口相关, 用户使用相关

### 白山云存储和七牛比的优势在哪里? 为什么七牛的API 不如 aws-s3的 API 灵活?  任稚
### 白山云存储提供哪些语言的 SDK 客户端? 哪里可以找到快速上手的例子? 任稚

### 云存储的Object是以目录结构存储的吗?

白山云存储的Object不是传统意义上的一个文件，存储方式也不是以文件系统保存的。
每个Object看上去是一个目录下的文件，对于云存储只是一个类似目录的字符串。

使用的时候需要注意的问题：

- Object 名字最好不要用 '/' 开头
  比如： 需要上传一个叫file.txt文件，bucket 是 `sandbox`,
  - object 设置为 `file.txt`, 访问的时候应该是 `http://s2.i.qingcdn.com/sandbox/file.txt` （推荐方式）
  - object 如果设置为 `/file.txt`, 访问的时候应该是 `http://s2.i.qingcdn.com/sandbox//file.txt` （强烈不推荐）

- Object 名字中最好不要有两个连续的 '/'
  比如： 需要在folder目录下上传一个叫file.txt文件，bucket 是 `sandbox`,
  - object 设置为 `folder/file.txt`, 访问的时候应该是 `http://s2.i.qingcdn.com/sandbox/folder/file.txt` （推荐方式）
  - object 如果设置为 `folder//file.txt`, 访问的时候应该是 `http://s2.i.qingcdn.com/sandbox/folder//file.txt` （强烈不推荐）

为什么白山云存储不建议在URL中带有2个'//'：

- 某些CDN的cache server可能会把URL中两个连续的'//'合并为一个'/'来回源，这个时候就会出现验证失败或者404

### 如何删除一个目录?

白山云存储不支持直接删除一个目录,
因为 aws S3 API 没有严格意义上的目录的概念(没有目录层级的结构,但习惯上把 key 按照"/"分隔当做目录来使用),这种情况下,对多个文件操作的原子性方面没法保证,
所以这方面都是写脚本做的.

可以通过以下方式完成该操作：

- 通过List Objects接口列出该目录的所有文件
- 通过Delete Object接口逐一进行删除

注意的问题：

- List Objects接口返回的文件列表不全部是该目录下的文件（列表是根据文件名字符排序的），
  可能包含下一个或几个目录；所以需要根据实际情况调整max-keys参数的值，
  并且需要对每一个文件进行筛选，确认是该目录的文件;
  如果设置 `prefix` 参数的话，就可以严格的列出以该 `prefix` 下所有文件.

- 一次删除（列出所有文件，逐一删除）不能保障该目录的文件都被清理完成
  在删除的过程中可能会有新上传，所以整个过程不能保持原子性

### 是否可以使用白山云存储做整站的备份? xp
### 404回源, 如果存储上文件不存在, 是否可以自动让存储去特定的地方拉取?

如果白山云存储上不存在该文件，可以配置指定去某个域名拉取文件,
文件的拉取是异步的，拉取完成时间和拉取的文件大小相关. 同时该请求会返回302,
location 响应头的值是文件拉取的地址. 如果需要提供拉取功能，需要提供：

- 回源的域名domain
- 请求uri到回源拉取文件uri的映射规则
- 回源请求的校验方式（可选）
- 是否启用HEAD请求回源拉取文件

### 数据同步, 导入: 如何使用离线下载同步数据，效率，速度如何? 闯
### 多文件上传是否支持? xp
### 超大文件上传是如何实现的, 有什么限制?

对于超大文件，白山云存储提供分片上传的接口，超大文件上传主要分为3步：

- 调用initiate multipart upload接口初始化一分片上传，请求返回一个uploadId, 后续2步需要这个uploadId标识这个分片上传
- 将超大文件分成若干块，然后调用multipart upload接口上传每个块, 请求参数中的partNmuber代表这个块的顺序
- 调用Complete Multipart Upload接口将上传的块合并

限制：

- 一个超大文件最多分成4096个块

### 是否可以让文件允许任何用户下载(匿名下载)?，是否可以对每一个文件授权只让特定的用户下载?

白山云存储支持匿名下载，并且可以授权到每个文件。

- 文件上传的时候可以指定特殊的ACL，具体参照PUT Object, Header: x-amz-acl
- 通过PUT Object ACL接口进行设置

---

##  周边服务, 图片, 视频处理等

### 白山存储支持实时图片转换,旋转,缩放,剪切,打水印吗? xp
### 是否可以让存储自动判断user-agent触发特定的图片剪裁输出? 闯
### 视频转码可以做吗?

暂不支持

---

##  用户管理存储资源相关, 管理控制台

### 存储用户可以有后台可以看到存储服务的使用量吗? 林飞

```
可以访问页面http://110.249.179.92:8080/ （未来将使用域名 console.bscstorage.com )进行查看。
```

### 白山云存储是否提供日志下载? 林飞

```
目前没有，计划2016年Q4做。
```


---

##  性能, 可靠性, 可用性相关

### 白山云存储是否做了上传(cdn)加速,来提升访问质量?  闯
### 白山云存储是否整合了cdn支持?

白山云存储和白山CDN是完美整合,申请存储和CDN可以同时进行，有完善的配置流程

- CDN上传加速
- CDN支持虚拟域名回源
- CDN支持签名回源，保护用户的数据安全

同时白山云存储还支持第三方CDN回源

### https是否支持? 如何使用? 林飞

```
如果是用户域名，首先用户域名需要备案，其次用户需要申请域名的SSL证书，然后将证书发给白山云，白山云配置完成后即可使用。
如果是使用白山云存储提供的域名，形如： https://用户域名.bscstorage.com  需要存储开发这个功能后可以使用。
```

### 加密存储是否支持?

暂不支持

### 文件可靠性多少，会不会丢文件?服务可用性是多少? xp
### 上传文件后多久可以下载到这个文件? xp

---

##  售前支持, 测试等

### 快速测试的环境？申请流程是什么? 林飞

```
需要联系存储的研发同事，开通user，创建bucket后就可以进行测试存储了。
如果要测试通过CDN进行上传下载加速的情况，需要将用户要访问的已备案的域名CNAME到CDN给出的域名，例如www.qq.com.i.qingcdn.com，CDN回源至s2.i.qingcdn.com。

创建bucket的建议：
1、以用户域名创建同名的bucket，例如用户网站域名www.qq.com，那么创建www.qq.com这样一个bucket，这时CDN配置加速时，无需修改host
2、用户自定义bucket的名字：
例如用户网站域名www.qq.com，用户要创建一个qq的bucket，那么CDN在配置加速时，用户访问www.qq.com.s2.i.qingcdn.com，回源时，需要将host修改成qq.s2.i.qingcdn.com
```

### 如何申请使用上传加速? 闯
### 如何同时申请存储和 cdn 服务? 沈杰
### 使用白山云存储如何配置和控制 CDN 的缓存时间等策略? 任稚

---

##  与第三方服务整合相关

### 整合文本编辑器的上传图片 闯

---

##  日常使用相关

### 白山云存储是否提供图形界面gui,或web管理界面让用户管理自己的文件? xp

### 如何上传文件? 是否可以通过 ftp 或 rsync 的方式上传? 是否有客户端?

白山云存储遵循业界通用 amazon-s3 API, 是1套 restful 的 API.
社区中有不少成熟的 SDK 和 命令行工具可以直接使用, 接口层完全可以省去开发工作了.
例如流行的:

-   [s3cmd][s3cmd]
-   [boto][boto]

白山云存储不支持 ftp 或 rsync 协议. 因为 amazon s3 对文件权限的控制粒度上更精细.

-   对图形界面的 ftp 替代品可以使用 Mac 下的 [cyberduck][cyberduck]
    或 Windows 下的[s3browser][s3browser].
-   对命令行方式的 ftp 或 rsync 的替代品可以使用 [s3cmd][s3cmd]

---

[s3cmd]:        http://s3tools.org/s3cmd
[boto]:         http://boto.cloudhackers.com/en/latest/
[cyberduck]:    https://cyberduck.io/
[s3browser]:    http://s3browser.com
